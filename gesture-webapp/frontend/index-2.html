<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手势魔法屋 - Gesture Magic Hub</title>
    <style>
        :root {
            --primary-bg: #f0f4f8;
            --secondary-bg: #ffffff;
            --text-color: #333;
            --header-bg: #2c3e50;
            --header-text: #ecf0f1;
            --accent-color: #3498db;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            background-color: var(--primary-bg);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 20px 0;
            text-align: center;
            border-bottom: 4px solid var(--accent-color);
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
        }

        header p {
            margin: 5px 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-app {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 30px;
            background: var(--secondary-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }

        .video-container {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .video-container h2 {
            margin-top: 0;
            color: var(--accent-color);
        }

        #video-feed {
            width: 100%;
            max-width: 640px;
            height: auto;
            border-radius: var(--border-radius);
            border: 2px solid #ddd;
            background-color: #000;
        }

        .result-container {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        #status {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        #gesture-label {
            font-size: 1.5rem;
            font-weight: bold;
        }

        #gesture-result {
            font-size: 8rem;
            font-weight: bold;
            color: var(--accent-color);
            margin: 10px 0;
            line-height: 1;
        }

        .features-section {
            margin-top: 40px;
        }

        .category-title {
            font-size: 2rem;
            color: var(--header-bg);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .feature-card {
            background-color: var(--secondary-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .feature-card h3 {
            margin-top: 0;
            color: var(--accent-color);
            font-size: 1.5rem;
        }
        
        .feature-card p {
            margin-bottom: 15px;
        }

        .feature-card ul {
            list-style-type: none;
            padding-left: 0;
        }

        .feature-card li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
        }
        
        .feature-card li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--accent-color);
            font-weight: bold;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>

    <header>
        <h1>手势魔法屋 - Gesture Magic Hub</h1>
        <p>一个基于实时手势识别的互动应用展示平台</p>
    </header>

    <div class="container">
        <!-- 主应用交互区 -->
        <section class="main-app">
            <div class="video-container">
                <h2>实时摄像头</h2>
                <!-- 视频流将由后端的 /video_feed 路由提供 -->
                <img id="video-feed" src="http://127.0.0.1:8000/video_feed" alt="正在加载摄像头画面...">
            </div>
            <div class="result-container">
                <div id="status">正在连接到后端...</div>
                <div id="gesture-label">当前识别手势</div>
                <div id="gesture-result">...</div>
            </div>
        </section>
        
        <!-- 所有玩法展示区 -->
        <section class="features-section">
            <!-- 1. 游戏与娱乐 -->
            <h2 class="category-title">🎮 游戏与娱乐 (Gamification & Entertainment)</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>玩法一：手势版“水果忍者”</h3>
                    <p><strong>概念:</strong> 屏幕上会随机飞出带有数字的气球或水果。你必须在限定时间内做出对应的手势来“击破”它们。</p>
                    <ul>
                        <li><strong>连击奖励:</strong> 连续正确识别可以获得分数加成。</li>
                        <li><strong>特殊道具:</strong> 做出“手势5”可以触发全屏爆炸，“手势0”可能是个炸弹，需要避开。</li>
                        <li><strong>速度挑战:</strong> 随着游戏进行，目标飞出的速度越来越快。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法二：手势“节奏大师”</h3>
                    <p><strong>概念:</strong> 类似于音乐节奏游戏，屏幕上会从上到下掉落数字方块。当方块到达指定区域时，你必须做出相应的手势。</p>
                    <ul>
                        <li><strong>音乐同步:</strong> 方块的掉落与音乐的节拍同步，非常有节奏感。</li>
                        <li><strong>长按音符:</strong> 对于某些长音符，你需要保持一个手势几秒钟。</li>
                        <li><strong>双人对战:</strong> 如果有两个摄像头或分屏，可以实现双人PK。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法三：魔法咒语施法</h3>
                    <p><strong>概念:</strong> 你扮演一个魔法师，不同的数字组合代表不同的魔法咒语。</p>
                    <ul>
                        <li><strong>咒语组合:</strong> 快速依次做出 “7-3-5” 的手势，可以释放一个“火球术”。做出 “1-2-3-4” 的手势，可以召唤一个“护盾”。</li>
                        <li><strong>沉浸感:</strong> 屏幕上配合炫酷的视觉特效，让你感觉自己真的在施法。</li>
                    </ul>
                </div>
            </div>
            
            <!-- 2. 智能控制与效率工具 -->
            <h2 class="category-title" style="margin-top: 40px;">⚙️ 智能控制与效率工具 (Smart Control & Productivity)</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>玩法四：非接触式媒体播放器</h3>
                    <p><strong>概念:</strong> 用手势来控制视频或音乐的播放。在厨房做饭（手很脏）或离电脑较远时非常方便。</p>
                    <ul>
                        <li><strong>手势 1:</strong> 播放/暂停</li>
                        <li><strong>手势 2:</strong> 下一首/下一个视频</li>
                        <li><strong>手势 3:</strong> 上一首/上一个视频</li>
                        <li><strong>手势 4:</strong> 减小音量</li>
                        <li><strong>手势 5:</strong> 增大音量</li>
                        <li><strong>手势 0:</strong> 静音</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法五：演示文稿遥控器</h3>
                    <p><strong>概念:</strong> 在做PPT演示时，用手势翻页或执行特定操作。解放双手，让你在演讲时更自然，更有科技感。</p>
                    <ul>
                        <li><strong>手势 1:</strong> 下一页</li>
                        <li><strong>手势 2:</strong> 上一页</li>
                        <li><strong>手势 5:</strong> 直接跳转到第5页（数字识别的独特优势！）</li>
                        <li><strong>手势 0:</strong> 黑屏/白屏（用于吸引观众注意力）</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法六：智能家居快捷指令</h3>
                    <p><strong>概念:</strong> 将手势与智能家居设备联动（需要通过IFTTT或Home Assistant等平台）。创造一个充满未来感的家。</p>
                    <ul>
                        <li><strong>手势 1:</strong> 打开/关闭书房的灯。</li>
                        <li><strong>手势 2:</strong> 将空调温度设为22度。</li>
                        <li><strong>手势 8:</strong> 播放你最喜欢的歌单。</li>
                    </ul>
                </div>
            </div>

            <!-- 3. 教育与辅助功能 -->
            <h2 class="category-title" style="margin-top: 40px;">❤️ 教育与辅助功能 (Education & Accessibility)</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>玩法七：数字手语学习与练习</h3>
                    <p><strong>概念:</strong> 一个帮助用户学习和练习数字手语的工具。</p>
                    <ul>
                        <li><strong>学习模式:</strong> 系统显示数字，并播放标准手势动画，用户模仿。</li>
                        <li><strong>练习模式:</strong> 系统随机出题，用户做出手势，程序实时判断对错并给出反馈。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法八：非接触式PIN码输入</h3>
                    <p><strong>概念:</strong> 在需要输入密码的场景（如ATM、门禁），通过摄像头进行手势输入。</p>
                    <ul>
                        <li><strong>公共卫生:</strong> 避免接触公共键盘，减少细菌传播。</li>
                        <li><strong>辅助功能:</strong> 帮助那些手部活动不便，无法精确按键的用户。</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>玩法九：简易通信板</h3>
                    <p><strong>概念:</strong> 为语言障碍人士设计。屏幕上的选项列表（1.喝水, 2.吃饭, 3.去洗手间），用户通过手势数字来表达需求。</p>
                    <ul>
                        <li><strong>社会价值:</strong> 这是一个非常有意义的应用，能切实帮助到有需要的人。</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
    
    <footer>
        <p>© 2024 Gesture WebApp Project. All ideas presented for demonstration purposes.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const statusEl = document.getElementById('status');
            const gestureResultEl = document.getElementById('gesture-result');
            
            // 假设你的Python后端（如FastAPI）在8000端口上运行，并提供一个/ws的WebSocket端点
            const wsUrl = 'ws://127.0.0.1:8000/ws';
            
            function connect() {
                const ws = new WebSocket(wsUrl);

                ws.onopen = () => {
                    console.log('Connected to WebSocket server.');
                    statusEl.textContent = '✅ 已连接到后端';
                    statusEl.style.color = '#27ae60';
                };

                ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        console.log('Received data:', data);
                        
                        // 检查后端是否发来了手势数据
                        if (data.gesture !== undefined) {
                            if (data.gesture === null || data.gesture === 'Unknown') {
                                gestureResultEl.textContent = '?';
                                gestureResultEl.style.color = '#95a5a6';
                            } else {
                                gestureResultEl.textContent = data.gesture;
                                gestureResultEl.style.color = 'var(--accent-color)';
                            }
                        }
                    } catch (error) {
                        console.error('Error parsing message data:', error);
                    }
                };

                ws.onclose = () => {
                    console.log('WebSocket connection closed. Reconnecting...');
                    statusEl.textContent = '🔌 连接已断开，正在尝试重连...';
                    statusEl.style.color = '#e74c3c';
                    gestureResultEl.textContent = '...';
                    // 尝试每3秒重连一次
                    setTimeout(connect, 3000);
                };

                ws.onerror = (error) => {
                    console.error('WebSocket error:', error);
                    statusEl.textContent = '❌ 连接失败';
                    statusEl.style.color = '#e74c3c';
                    ws.close();
                };
            }

            // 初始连接
            connect();
        });
    </script>
</body>
</html>